services:
  docker-monitor:
    build: .
    image: docker-monitor:latest
    container_name: docker-monitor
    restart: unless-stopped
    ports:
      - "3001:3001"
    volumes:
      # Mount Docker socket to allow container management
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      - NODE_ENV=production
      - PORT=3001
      # Update Checker
      - UPDATE_CHECKER_ENABLED=false
      - UPDATE_CHECKER_INTERVAL_MINUTES=60
      - UPDATE_CHECKER_CONTAINERS=*
      - UPDATE_CHECKER_EXCLUDE_CONTAINERS=
      # Discord Notifications
      - DISCORD_ENABLED=false
      - DISCORD_WEBHOOK_URL=
      - DISCORD_BOT_TOKEN=
      - DISCORD_GUILD_ID=
      # Registry Auth (for private images)
      - GHCR_TOKEN=
    # Run as root to access Docker socket (or configure proper group permissions)
    # For better security, consider adding the container user to the docker group
    user: root
